(this.webpackJsonprteee=this.webpackJsonprteee||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){var i=n(149),o=n(150),r={},a=null;e.exports={NewRegion:function(e,t,n,o,a){if(null!=r[e])throw"Id is already taken";if(null==r[t])throw"The parent id "+t+" Does not exists";r[e]=new i(e,t,n,o,a),r[t].AddSubRegion(r[e])},AddRootRegion:function(){a=new i(1,null,"root","#ffffff",[0,0,1e4,1e4]),r[1]=a},OnRectSizeChange:function(e,t){if(null==r[e])throw"Id does not exists";r[e].edges=t},GetRegionCount:function(){return Object.keys(r).length},AddPoint:function(e,t,n,i,a){if(null==r[t])throw"Id does not exists";r[t].AddPoint(new o(e,t,n,i,a))},Search:function(e){return null!=a?a.GetRegionsBasedOnTargetRegion(a,e):[]},RegionHash:function(){return r},IsLeaf:function(e){return r[e].IsLeaf()},PointsCount:function(e){return r[e].points.length},RegionExists:function(e){return null!=r[e]}}},149:function(e,t,n){"use strict";n.r(t),function(e){var t=n(42),i=n(67),o=function(){function e(n,i,o,r,a){Object(t.a)(this,e),this.id=n,this.parent_id=i,this.name=o,this.points=[],this.color=r,this.edges=a,this.regions=[]}return Object(i.a)(e,[{key:"AddSubRegion",value:function(e){this.regions.push(e)}},{key:"rectanglesOverlap",value:function(e,t,n,i){var o=e[0],r=e[1],a=t[0],s=t[1],c=n[0],l=n[1],d=i[0],u=i[1];return o<d&&c<a&&r<u&&l<s}},{key:"IsPointInsideRegion",value:function(e,t,n,i){var o=e[0],r=t[0],a=e[1],s=t[1];return n>o&&n<r&&i>a&&i<s}},{key:"GetRegionRecursive",value:function(e,t,n,i){if(n.IsLeaf())for(var o=0;o<n.points.length;o++)this.IsPointInsideRegion(e,t,n.points[o].x,n.points[o].y)&&i.push(n.points[o]);else for(o=0;o<n.regions.length;o++){var r=n.regions[o].edges,a=[r[0],r[1]],s=[r[2],r[3]];this.rectanglesOverlap(e,t,a,s)&&this.GetRegionRecursive(e,t,n.regions[o],i)}}},{key:"GetRegionsBasedOnTargetRegion",value:function(e,t){var n=[t[0],t[1]],i=[t[2],t[3]],o=[];return this.GetRegionRecursive(n,i,e,o),o}},{key:"IsLeaf",value:function(){return 0==this.regions.length}},{key:"AddPoint",value:function(e){this.points.push(e)}}]),e}();e.exports=o}.call(this,n(64)(e))},150:function(e,t,n){"use strict";n.r(t),function(e){var t=n(42);e.exports=function e(n,i,o,r,a){Object(t.a)(this,e),this.id=n,this.parent_region_id=i,this.name=o,this.x=r,this.y=a}}.call(this,n(64)(e))},155:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(13),a=n.n(r),s=(n(79),n(17)),c=n(68),l=n(16),d=n(23),u=n(3),h=function(e){var t=e.shapeProps,n=e.isSelected,i=e.onSelect,r=e.onChange,a=e.AddPoint,s=e.Getpoints,c=e.SetPoints,h=e.IsLeaf,g=o.a.useRef(),f=o.a.useRef();return o.a.useEffect((function(){n&&(f.current.nodes([g.current]),f.current.getLayer().batchDraw())}),[n]),Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(d.c,Object(l.a)(Object(l.a)({opacity:.4,onDblClick:i,onDblTap:i,ref:g},t),{},{draggable:!0,onClick:function(e){if(1===e.evt.button){var n=e.target.getStage().getPointerPosition(),i={x:n.x,y:n.y},o=t.id,r=prompt("Add the point name");if(null===r||""===r);else if(h(o)){var l=s.slice();l.push({x:i.x,y:i.y}),a(r,o,r,i.x,-1*i.y),c(l)}else alert("Cannot add points in Non leaf region ")}},onDragEnd:function(e){r(Object(l.a)(Object(l.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=g.current,i=n.scaleX(),o=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(l.a)(Object(l.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*i),height:Math.max(n.height()*o)}))}})),n&&Object(u.jsx)(d.f,{ref:f,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})},g=function(e){var t=o.a.useState(null),n=Object(s.a)(t,2),i=n[0],r=n[1],a=o.a.useState([20,50]),c=Object(s.a)(a,2),l=c[0],g=c[1],f=function(e){e.target===e.target.getStage()&&r(null)};return Object(u.jsx)(d.d,{width:window.innerWidth,height:window.innerHeight,onMouseDown:f,onTouchStart:f,children:Object(u.jsxs)(d.b,{children:[e.GetRectangles.map((function(t,n){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.e,{text:t.id,x:t.x,y:t.y,fill:e.IsDarkTheme?"white":"black"}),Object(u.jsx)(h,{shapeProps:t,AddPoint:e.RTreeAdapter.AddPoint,IsLeaf:e.RTreeAdapter.IsLeaf,Getpoints:e.Getpoints,SetPoints:e.SetPoints,isSelected:t.id===i,onSelect:function(){r(t.id)},onChange:function(i){var o=e.GetRectangles.slice();o[n]=i;var r=i.x,a=i.y,s=i.height,c=i.width;e.RTreeAdapter.OnRectSizeChange(t.id,[r,-1*(a+s),r+c,-1*a]),e.SetRectangles(o)}},n)]})})),e.Getpoints.map((function(e,t){return Object(u.jsx)(d.a,{x:e.x,y:e.y,radius:3,fill:"black",shadowBlur:30},t)})),Object(u.jsx)(d.e,{text:"Target",x:l[0],y:l[1],fill:e.IsDarkTheme?"white":"black"}),Object(u.jsx)(d.c,{x:l[0],y:l[1],width:300,height:300,stroke:"yellow",strokeWidth:1,dash:[1,1],shadowBlur:10,draggable:!0,onDragEnd:function(t){for(var n=performance.now(),i=e.RTreeAdapter.Search([t.target.x(),-1*(t.target.y()+300),t.target.x()+300,-1*t.target.y()]),o=performance.now(),r=e.FoundPoints.splice(),a=0;a<i.length;a++)r.push({parent_region_id:i[a].parent_region_id,name:i[a].name});console.log([t.target.x(),-1*(t.target.y()+300),t.target.x()+300,-1*t.target.y()]),console.log(JSON.stringify(e.RTreeAdapter.RegionHash())),e.SetFoundPoints(r),g([t.target.x(),t.target.y()]),e.SetMs(o-n)}})]})})},f=n(66),j=n.n(f),b=(n(145),n(146),function(){return Object(u.jsx)(j.a,{data:{name:"Parent",children:[{name:"Child One",children:[{name:"child3"}]},{name:"Child Two"}]},nodeRadius:15,margins:{top:20,bottom:10,left:20,right:200},height:700,width:1e3,animated:!0})}),p=n(181),x=n(183),O=n(179),y=n(184),v=n(182),m=n(178),R=(n(147),n(148));R.AddRootRegion();var w=Object(c.a)({IsDarkTheme:!0,IsCanvasView:!0,Rectangles:[],Points:[],FoundPoints:[],ms:0,dialogClosed:!1}).useGlobalState,S=function(){var e=w("IsDarkTheme"),t=Object(s.a)(e,2),n=t[0],i=t[1],o=w("IsCanvasView"),r=Object(s.a)(o,2),a=r[0],c=(r[1],w("Rectangles")),l=Object(s.a)(c,2),d=l[0],h=l[1],f=w("Points"),j=Object(s.a)(f,2),S=j[0],k=j[1],P=w("FoundPoints"),I=Object(s.a)(P,2),T=I[0],C=I[1],A=w("ms"),D=Object(s.a)(A,2),G=D[0],F=D[1],L=w("dialogClosed"),M=Object(s.a)(L,2),N=M[0],_=M[1];return Object(u.jsxs)("div",{className:"App",style:{"background-color":n?"#282c34":"white"},children:[Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsx)("h2",{style:{"text-align":"center",color:n?"white":"black"},children:"R Tree"}),Object(u.jsxs)("p",{style:{"font-size":"10px","text-align":"center",color:n?"white":"black"},children:[G," MS time taken"]}),Object(u.jsxs)("div",{style:{width:"100%",display:"flex","justify-content":"center"},children:[a?Object(u.jsxs)("div",{children:["\xa0",Object(u.jsx)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return function(){var e=(986895|Math.floor(16777215*Math.random())).toString(16),t=d.slice(),n=prompt("Type in the region name ");if(t.push({x:0,y:0,width:100,height:100,fill:"#"+e,id:n}),""===n||null===n)alert("Invalid region name");else if(0===d.length)R.NewRegion(n,1,n,"#"+e,[0,-100,100,0]),h(t);else{var i=prompt("Type in parent region name ");""===i||null===i?alert("Invalid Parent name"):1==R.RegionExists(i)&&0==R.RegionExists(n)?R.PointsCount(i)<1?(R.NewRegion(n,i,n,"#"+e,[0,-100,100,0]),h(t)):alert("Region cannot be added on a region which already contains points"):alert("No Such Region with the parent id exists or region id is already taken")}}()},children:"Add Region"}),"\xa0"]}):Object(u.jsx)("div",{}),Object(u.jsxs)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return _(!N)},children:["Show Points (",T.length,")"]}),"\xa0",Object(u.jsx)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return i(!n)},children:n?"Day Theme":"Night Theme"}),"\xa0"]}),a?Object(u.jsx)(g,{GetRectangles:d,SetRectangles:h,SetFoundPoints:C,FoundPoints:T,Getpoints:S,SetPoints:k,IsDarkTheme:n,RTreeAdapter:R,SetMs:F}):Object(u.jsx)(b,{})]}),Object(u.jsxs)(p.a,{open:N,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(u.jsx)(y.a,{children:Object(u.jsx)("div",{style:{width:"100%"},children:T.map((function(e,t){return Object(u.jsxs)("div",{children:["\xa0\xa0\xa0",Object(u.jsx)(m.a,{badgeContent:"",color:"primary"}),Object(u.jsx)(v.a,{component:"div",display:"inline",p:1,m:1,children:e.name+" In region "+e.parent_region_id}),Object(u.jsx)("br",{})]})}))})}),Object(u.jsx)(O.a,{children:Object(u.jsx)(x.a,{color:"primary",onClick:function(){return _(!N)},children:"Done"})})]})]})},k=function(){return Object(u.jsx)(S,{})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,187)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),o(e),r(e),a(e)}))};a.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),P()},79:function(e,t,n){}},[[155,1,2]]]);
//# sourceMappingURL=main.6bc01dee.chunk.js.map